[2025-05-27T15:07:48.237Z] Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:652:11)
    at ServerResponse.header (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:684:10)
    at ServerResponse.send (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:161:12)
    at ServerResponse.json (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:250:15)
    at successResponse (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:15:26)
    at APIResponseHandler (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:10:23)
    at file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:19:3
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

[2025-05-27T15:10:02.037Z] Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:652:11)
    at ServerResponse.header (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:684:10)
    at ServerResponse.send (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:161:12)
    at ServerResponse.json (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:250:15)
    at successResponse (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:15:26)
    at APIResponseHandler (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:10:23)
    at file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:19:3
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

[2025-05-27T15:10:54.169Z] Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:652:11)
    at ServerResponse.header (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:684:10)
    at ServerResponse.send (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:161:12)
    at ServerResponse.json (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:250:15)
    at successResponse (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:15:26)
    at APIResponseHandler (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:10:23)
    at file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:19:3
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

[2025-05-27T15:12:26.409Z] MongooseError: Operation `users.findOne()` buffering timed out after 10000ms
    at Timeout.<anonymous> (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\mongoose\lib\drivers\node-mongodb-native\collection.js:187:23)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)

[2025-05-27T15:15:12.740Z] Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:652:11)
    at ServerResponse.header (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:684:10)
    at ServerResponse.send (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:161:12)
    at ServerResponse.json (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express\lib\response.js:250:15)
    at successResponse (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:15:26)
    at APIResponseHandler (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:10:23)
    at file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:19:3
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

[2025-05-27T15:26:24.272Z] Error: Illegal arguments: string, undefined
    at Object.compareSync (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/node_modules/bcryptjs/index.js:228:11)
    at UserService.login (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/services/userService.js:40:42)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:14:3

[2025-05-27T15:29:51.410Z] Error: Illegal arguments: string, undefined
    at Object.compareSync (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/node_modules/bcryptjs/index.js:228:11)
    at UserService.login (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/services/userService.js:40:42)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:14:3

[2025-05-27T15:32:45.857Z] Error: Illegal arguments: string, undefined
    at Object.compareSync (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/node_modules/bcryptjs/index.js:228:11)
    at UserService.login (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/services/userService.js:42:42)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:14:3

[2025-05-27T15:34:07.730Z] Error: Illegal arguments: string, undefined
    at Object.compareSync (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/node_modules/bcryptjs/index.js:228:11)
    at UserService.login (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/services/userService.js:42:42)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:14:3

[2025-05-27T15:36:22.019Z] TypeError: userRepository.findByEmail(...).select is not a function
    at UserService.login (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/services/userService.js:35:58)
    at file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:14:21
    at file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/helpers/catchAsync.js:3:21
    at Layer.handleRequest (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\router\lib\route.js:157:13)
    at validateRequest (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/middlewares/validator.js:14:3)
    at Layer.handleRequest (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\router\lib\route.js:157:13)
    at middleware (C:\Users\GRANDSTORM\Desktop\Shophoria\server\node_modules\express-validator\lib\middlewares\check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

[2025-05-27T15:44:25.528Z] ReferenceError: token is not defined
    at APIResponseHandler (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/utils/responseHandler.js:10:71)
    at UserService.login (file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/services/userService.js:58:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///C:/Users/GRANDSTORM/Desktop/Shophoria/server/src/controllers/authController.js:14:3

